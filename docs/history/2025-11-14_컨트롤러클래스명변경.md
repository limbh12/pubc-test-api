# 컨트롤러 클래스명 변경 (Service → Controller)

**작업일**: 2025-11-14  
**작업자**: Claude  
**목적**: JAX-RS 컨트롤러 클래스명을 비즈니스 서비스 계층과 명확히 구분

---

## 변경 개요

### 문제 인식

기존 클래스명 `CultureFacilityRestService` / `CultureFacilityImprovedRestService`가 비즈니스 로직을 처리하는 `CultureFacilityService`와 혼동될 수 있음.

### 해결 방안

JAX-RS 엔드포인트 클래스의 접미사를 `Service` → `Controller`로 변경하여 **컨트롤러 계층**임을 명확히 표현.

---

## 변경 내역

### 1. 파일명 변경

| 이전 파일명 | 변경 후 파일명 | 위치 |
|-----------|--------------|------|
| `CultureFacilityRestService.java` | `CultureFacilityRestController.java` | `src/main/java/iros/api/facility/controller/` |
| `CultureFacilityImprovedRestService.java` | `CultureFacilityImprovedRestController.java` | `src/main/java/iros/api/facility/controller/` |

### 2. 클래스 선언 변경

#### CultureFacilityRestController.java (Mock 프로파일)

```java
// 변경 전
@Component("cultureFacilityRestService")
@Path("/facilities")
@Profile("mock")
public class CultureFacilityRestService {
    private static final Logger logger = LoggerFactory.getLogger(CultureFacilityRestService.class);
    // ...
}

// 변경 후
@Component("cultureFacilityRestController")
@Path("/facilities")
@Profile("mock")
public class CultureFacilityRestController {
    private static final Logger logger = LoggerFactory.getLogger(CultureFacilityRestController.class);
    // ...
}
```

#### CultureFacilityImprovedRestController.java (Improved 프로파일)

```java
// 변경 전
@Component("cultureFacilityImprovedRestService")
@Path("/facilities")
@Profile("improved")
public class CultureFacilityImprovedRestService {
    private static final Logger logger = LoggerFactory.getLogger(CultureFacilityImprovedRestService.class);
    // ...
}

// 변경 후
@Component("cultureFacilityImprovedRestController")
@Path("/facilities")
@Profile("improved")
public class CultureFacilityImprovedRestController {
    private static final Logger logger = LoggerFactory.getLogger(CultureFacilityImprovedRestController.class);
    // ...
}
```

### 3. CxfConfig.java 참조 업데이트

#### Import 문

```java
// 변경 전
import iros.api.facility.controller.CultureFacilityRestService;
import iros.api.facility.controller.CultureFacilityImprovedRestService;

// 변경 후
import iros.api.facility.controller.CultureFacilityRestController;
import iros.api.facility.controller.CultureFacilityImprovedRestController;
```

#### @Bean 메서드 파라미터

```java
// Mock 프로파일 (변경 전)
@Bean
@Profile("mock")
public Server restApiServerMock(CultureFacilityRestService cultureFacilityRestService) {
    // ...
    factory.setServiceBean(cultureFacilityRestService);
}

// Mock 프로파일 (변경 후)
@Bean
@Profile("mock")
public Server restApiServerMock(CultureFacilityRestController cultureFacilityRestController) {
    // ...
    factory.setServiceBean(cultureFacilityRestController);
}

// Improved 프로파일 (변경 전)
@Bean
@Profile("improved")
public Server restApiServerImproved(CultureFacilityImprovedRestService cultureFacilityImprovedRestService) {
    // ...
    factory.setServiceBean(cultureFacilityImprovedRestService);
}

// Improved 프로파일 (변경 후)
@Bean
@Profile("improved")
public Server restApiServerImproved(CultureFacilityImprovedRestController cultureFacilityImprovedRestController) {
    // ...
    factory.setServiceBean(cultureFacilityImprovedRestController);
}
```

### 4. 문서 업데이트

변경된 클래스명을 반영한 문서:
- `.github/copilot-instructions.md`
- `docs/history/2025-11-14_개선형프로파일트러블슈팅.md`
- `docs/history/2025-11-13_REST-API표준준수및한글파라미터처리.md`
- `docs/history/2025-11-13_패키지구조재구성.md`

---

## 배포 및 검증

### 빌드/배포

```bash
# Maven 빌드
mvn clean package

# WildFly 배포
cp target/pubc-test-api.war env/jboss/wildfly-26.1.3.Final/standalone/deployments/
```

### Mock 프로파일 검증

**application.properties**:
```properties
spring.profiles.active=mock
```

**배포 로그**:
```
2025-11-14 14:30:42,209 INFO  [CXF] Initializing REST server for mock profile
2025-11-14 14:30:42,265 INFO  [CXF] Registered JAX-RS service: CultureFacilityRestController
```

**API 테스트**:
```bash
curl "http://localhost:8080/pubc-test-api/api/facilities?serviceKey=TEST_KEY_001&pageSize=2"
```

**응답** (200 OK):
```json
{
  "data": [...],
  "resultCode": "00",
  "resultMessage": "정상 처리되었습니다",
  "totalCount": 8,
  "pageNum": 1,
  "pageSize": 2
}
```

### Improved 프로파일 검증

**application.properties**:
```properties
spring.profiles.active=improved
```

**배포 로그**:
```
2025-11-14 14:29:38,354 INFO  [CXF] Initializing REST server for improved profile
2025-11-14 14:29:38,428 INFO  [CXF] Registered JAX-RS service: CultureFacilityImprovedRestController
```

**API 테스트**:
```bash
curl "http://localhost:8080/pubc-test-api/api/facilities?serviceKey=TEST_KEY_001&pageSize=2"
```

**응답** (200 OK):
```json
{
  "data": [...],
  "processingTimeMs": 263,
  "authType": "PUBC-Improved",
  "resultCode": "00",
  "resultMessage": "정상 처리되었습니다",
  "totalCount": 8,
  "pageNum": 1,
  "pageSize": 2
}
```

---

## 변경 영향 분석

### 수정된 파일

| 파일 경로 | 변경 유형 | 영향도 |
|----------|---------|-------|
| `src/main/java/iros/api/facility/controller/CultureFacilityRestController.java` | 파일명, 클래스명, @Component, Logger | 중 |
| `src/main/java/iros/api/facility/controller/CultureFacilityImprovedRestController.java` | 파일명, 클래스명, @Component, Logger | 중 |
| `src/main/java/iros/api/common/config/CxfConfig.java` | Import, 메서드 파라미터 | 중 |
| `.github/copilot-instructions.md` | 문서화 | 낮음 |
| `docs/history/*.md` | 문서화 | 낮음 |

### 기능 영향

- ✅ **API 동작**: 변경 없음 (200 OK 응답 확인)
- ✅ **Spring Bean 등록**: 정상 (`@Component` name 변경)
- ✅ **CXF 엔드포인트 등록**: 정상 (로그 확인)
- ✅ **프로파일 전환**: 정상 (mock ↔ improved 전환 테스트 완료)

---

## 개발자 체크리스트

향후 JAX-RS 컨트롤러 추가 시 네이밍 규칙:

- [ ] 클래스명은 `*Controller`로 끝남 (예: `UserRestController`)
- [ ] `@Component` name도 Controller 접미사 사용 (예: `"userRestController"`)
- [ ] Logger 변수명은 클래스명과 일치
- [ ] JavaDoc `@see` 참조도 올바른 클래스명 사용
- [ ] 비즈니스 로직은 `*Service` 인터페이스/구현체에 위임

---

## 관련 문서

- [개선형 프로파일 트러블슈팅](./2025-11-14_개선형프로파일트러블슈팅.md)
- [REST API 표준 준수 및 한글 파라미터 처리](./2025-11-13_REST-API표준준수및한글파라미터처리.md)
- [패키지 구조 재구성](./2025-11-13_패키지구조재구성.md)
