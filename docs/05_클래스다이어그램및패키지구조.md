# í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ ë° íŒ¨í‚¤ì§€ êµ¬ì¡° ì„¤ê³„ì„œ
## PUBC ì—°ë™ í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸

**ì‘ì„±ì¼**: 2025-11-04
**í”„ë¡œì íŠ¸ëª…**: PUBC-Test-API
**ë²„ì „**: 2.0 (JDK 1.8)
**ì•„í‚¤í…ì²˜**: ì¡°íšŒ ì „ìš© (Read-Only)

> **ğŸ“Œ ê¸°ìˆ  ìŠ¤íƒ**: ì´ ë¬¸ì„œëŠ” **[JDK 1.8 ê¸°ìˆ  ìŠ¤íƒ](./00_ê¸°ìˆ ìŠ¤íƒ_JDK18.md)** ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
> - DAO Layer: **MyBatis 3.5.13** Mapper Interface ì‚¬ìš© (ì¡°íšŒ ì „ìš©)
> - Java 8: Lambda, Stream API í™œìš© ê°€ëŠ¥
> - **ì¤‘ìš”**: ëª¨ë“  ì„œë¹„ìŠ¤ ë©”ì„œë“œëŠ” ì¡°íšŒ(SELECT)ë§Œ ìˆ˜í–‰í•©ë‹ˆë‹¤. INSERT/UPDATE/DELETE ì—†ìŒ.

---

## ëª©ì°¨

1. [íŒ¨í‚¤ì§€ êµ¬ì¡°](#1-íŒ¨í‚¤ì§€-êµ¬ì¡°)
2. [í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨](#2-í´ë˜ìŠ¤-ë‹¤ì´ì–´ê·¸ë¨)
3. [ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨](#3-ì‹œí€€ìŠ¤-ë‹¤ì´ì–´ê·¸ë¨)
4. [ê³„ì¸µë³„ ìƒì„¸ ì„¤ê³„](#4-ê³„ì¸µë³„-ìƒì„¸-ì„¤ê³„)
5. [ì„¤ì • íŒŒì¼ êµ¬ì¡°](#5-ì„¤ì •-íŒŒì¼-êµ¬ì¡°)

---

## 1. íŒ¨í‚¤ì§€ êµ¬ì¡°

### 1.1 ì „ì²´ íŒ¨í‚¤ì§€ êµ¬ì¡°

```
src/
â””â”€â”€ iros/
    â””â”€â”€ test/                                    # ë£¨íŠ¸ íŒ¨í‚¤ì§€
        â”‚
        â”œâ”€â”€ common/                              # ê³µí†µ ëª¨ë“ˆ íŒ¨í‚¤ì§€
        â”‚   â”œâ”€â”€ CommonProc.java                  # PUBC í†µí•© í´ë˜ìŠ¤
        â”‚   â”œâ”€â”€ Constants.java                   # ìƒìˆ˜ ì •ì˜
        â”‚   â”œâ”€â”€ exception/                       # ì˜ˆì™¸ í´ë˜ìŠ¤
        â”‚   â”‚   â”œâ”€â”€ BusinessException.java       # ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ˆì™¸
        â”‚   â”‚   â”œâ”€â”€ AuthenticationException.java # ì¸ì¦ ì˜ˆì™¸
        â”‚   â”‚   â””â”€â”€ ServiceException.java        # ì„œë¹„ìŠ¤ ì˜ˆì™¸
        â”‚   â””â”€â”€ util/                            # ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤
        â”‚       â”œâ”€â”€ JsonUtil.java                # JSON ë³€í™˜
        â”‚       â”œâ”€â”€ XmlUtil.java                 # XML ë³€í™˜
        â”‚       â””â”€â”€ DateUtil.java                # ë‚ ì§œ ì²˜ë¦¬
        â”‚
        â”œâ”€â”€ rest/                                # REST API íŒ¨í‚¤ì§€
        â”‚   â”œâ”€â”€ controller/                      # REST ì»¨íŠ¸ë¡¤ëŸ¬
        â”‚   â”‚   â””â”€â”€ CultureFacilityRestController.java  # ë¬¸í™”ì‹œì„¤ REST API (ì¡°íšŒ ì „ìš©)
        â”‚   â””â”€â”€ dto/                             # Data Transfer Object
        â”‚       â”œâ”€â”€ ApiResponse.java             # API ì‘ë‹µ DTO
        â”‚       â”œâ”€â”€ ErrorResponse.java           # ì—ëŸ¬ ì‘ë‹µ DTO
        â”‚       â””â”€â”€ PageResponse.java            # í˜ì´ì§• ì‘ë‹µ DTO
        â”‚
        â”œâ”€â”€ soap/                                # SOAP ì›¹ ì„œë¹„ìŠ¤ íŒ¨í‚¤ì§€
        â”‚   â”œâ”€â”€ service/                         # SOAP ì„œë¹„ìŠ¤
        â”‚   â”‚   â””â”€â”€ CultureFacilitySoapService.java  # ë¬¸í™”ì‹œì„¤ SOAP ì„œë¹„ìŠ¤ (ì¡°íšŒ ì „ìš©)
        â”‚   â””â”€â”€ dto/                             # SOAP DTO
        â”‚       â”œâ”€â”€ FacilityListResponse.java    # ì‹œì„¤ ëª©ë¡ ì‘ë‹µ
        â”‚       â”œâ”€â”€ FacilityResponse.java        # ì‹œì„¤ ì‘ë‹µ
        â”‚       â””â”€â”€ SoapFault.java               # SOAP Fault
        â”‚
        â”œâ”€â”€ facility/                            # ë¬¸í™”ì‹œì„¤ ë„ë©”ì¸ íŒ¨í‚¤ì§€
        â”‚   â”œâ”€â”€ service/                         # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ì¡°íšŒ ì „ìš©)
        â”‚   â”‚   â”œâ”€â”€ CultureFacilityService.java  # ì¸í„°í˜ì´ìŠ¤
        â”‚   â”‚   â””â”€â”€ CultureFacilityServiceImpl.java  # êµ¬í˜„ì²´
        â”‚   â”œâ”€â”€ dao/                             # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ (ì¡°íšŒ ì „ìš©)
        â”‚   â”‚   â””â”€â”€ CultureFacilityMapper.java   # MyBatis Mapper Interface (SELECTë§Œ)
        â”‚   â””â”€â”€ vo/                              # Value Object
        â”‚       â””â”€â”€ CultureFacilityVO.java       # ë¬¸í™”ì‹œì„¤ VO
        â”‚
        â””â”€â”€ config/                              # ì„¤ì • í´ë˜ìŠ¤ (Spring Java Config)
            â”œâ”€â”€ AppConfig.java                   # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
            â”œâ”€â”€ CxfConfig.java                   # Apache CXF ì„¤ì •
            â””â”€â”€ DataSourceConfig.java            # ë°ì´í„°ì†ŒìŠ¤ ì„¤ì •

WebContent/
â”œâ”€â”€ WEB-INF/
â”‚   â”œâ”€â”€ web.xml                                  # ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ì„œìˆ ì
â”‚   â”œâ”€â”€ lib/                                     # ì˜ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ JAR
â”‚   â”‚   â”œâ”€â”€ iros_pubc_1.1.jar                    # PUBC ëª¨ë“ˆ (í•„ìˆ˜)
â”‚   â”‚   â”œâ”€â”€ iros_cipher.jar                      # PUBC ì•”í˜¸í™”
â”‚   â”‚   â”œâ”€â”€ spring-2.5.6.jar                     # Spring Framework
â”‚   â”‚   â”œâ”€â”€ cxf-2.2.9.jar                        # Apache CXF
â”‚   â”‚   â”œâ”€â”€ ibatis-2.3.4.jar                     # iBATIS
â”‚   â”‚   â””â”€â”€ [ê¸°íƒ€ ì˜ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬]
â”‚   â””â”€â”€ config/                                  # XML ì„¤ì • íŒŒì¼
â”‚       â”œâ”€â”€ spring/                              # Spring ì„¤ì •
â”‚       â”‚   â”œâ”€â”€ context-app.xml                  # ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸
â”‚       â”‚   â”œâ”€â”€ context-datasource.xml           # ë°ì´í„°ì†ŒìŠ¤
â”‚       â”‚   â”œâ”€â”€ context-cxf.xml                  # CXF ì„¤ì •
â”‚       â”‚   â””â”€â”€ context-transaction.xml          # íŠ¸ëœì­ì…˜
â”‚       â””â”€â”€ sqlmap/                              # iBATIS SQL Map
â”‚           â”œâ”€â”€ sql-map-config.xml               # SQL Map ì„¤ì •
â”‚           â””â”€â”€ sqlmap-user.xml                  # ì‚¬ìš©ì SQL Map
â””â”€â”€ index.jsp                                    # ë©”ì¸ í˜ì´ì§€
```

### 1.2 íŒ¨í‚¤ì§€ ì˜ì¡´ì„± ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  REST / SOAP                        â”‚
â”‚           (Presentation Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ rest.controller â”‚      â”‚  soap.service      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                       â”‚
             â†“                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   common                            â”‚
â”‚            (Common Layer)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  CommonProc (PUBC Integration)               â”‚   â”‚
â”‚  â”‚  - authServiceCall()                         â”‚   â”‚
â”‚  â”‚  - useSttusServiceCall()                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             iros.pubc.* (PUBC ëª¨ë“ˆ)                 â”‚
â”‚           (External Library)                        â”‚
â”‚  - UserCrtfcProcessService                          â”‚
â”‚  - UseSttusService                                  â”‚
â”‚  - PubcErrorCodeProperties                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              facility.service                       â”‚
â”‚      (Business Logic Layer - ì¡°íšŒ ì „ìš©)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  CultureFacilityService /                    â”‚   â”‚
â”‚  â”‚  CultureFacilityServiceImpl                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 facility.dao                        â”‚
â”‚       (Data Access Layer - ì¡°íšŒ ì „ìš©)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  CultureFacilityMapper (MyBatis)             â”‚   â”‚
â”‚  â”‚  (SELECT ì¿¼ë¦¬ë§Œ ì œê³µ)                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Database                           â”‚
â”‚  - TB_CULTURE_FACILITY (Application)                â”‚
â”‚  - TN_PUBC_* (PUBC)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

### 2.1 REST API ê³„ì¸µ (ì¡°íšŒ ì „ìš©)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CultureFacilityRestController             â”‚
â”‚       @Path("/api")                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - facilityService: CultureFacilityService   â”‚
â”‚ - commonProc: CommonProc                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getCultureFacilityList(...): Response     â”‚
â”‚   (ì¡°íšŒ ì „ìš© - facilityType, regionCode,    â”‚
â”‚    facilityName í•„í„°ë§)                     â”‚
â”‚ + getCultureFacility(facilityId): Response  â”‚
â”‚   (ì¡°íšŒ ì „ìš© - ìƒì„¸ ì •ë³´)                   â”‚
â”‚ - createSuccessResponse(...): Response      â”‚
â”‚ - createErrorResponse(...): Response        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ uses
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ApiResponse<T>                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - code: String                              â”‚
â”‚ - msg: String                               â”‚
â”‚ - data: T                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + ApiResponse(code, msg, data)              â”‚
â”‚ + success(data): ApiResponse<T>             â”‚
â”‚ + error(code, msg): ApiResponse<T>          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       PageResponse<T>                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - totalCount: int                           â”‚
â”‚ - pageNo: int                               â”‚
â”‚ - numOfRows: int                            â”‚
â”‚ - items: List<T>                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + PageResponse(...)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 SOAP ì›¹ ì„œë¹„ìŠ¤ ê³„ì¸µ (ì¡°íšŒ ì „ìš©)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CultureFacilitySoapService                â”‚
â”‚       @WebService                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - facilityService: CultureFacilityService   â”‚
â”‚ - commonProc: CommonProc                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getCultureFacilityList(...):              â”‚
â”‚     FacilityListResponse                    â”‚
â”‚   @WebMethod (ì¡°íšŒ ì „ìš©)                     â”‚
â”‚ + getCultureFacility(...):                  â”‚
â”‚     FacilityResponse                        â”‚
â”‚   @WebMethod (ì¡°íšŒ ì „ìš©)                     â”‚
â”‚ - getHttpServletRequest(): HttpServletRequestâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ uses
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       FacilityListResponse                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - code: String                              â”‚
â”‚ - msg: String                               â”‚
â”‚ - totalCount: int                           â”‚
â”‚ - pageNo: int                               â”‚
â”‚ - numOfRows: int                            â”‚
â”‚ - facilities: List<CultureFacilityVO>       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + FacilityListResponse(...)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ê³µí†µ ê³„ì¸µ (PUBC í†µí•©)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       CommonProc                            â”‚
â”‚       @Component                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - userCrtfcProcessService:                  â”‚
â”‚     UserCrtfcProcessService                 â”‚
â”‚ - useSttusService: UseSttusService          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + authServiceCall(request): UserCrtfcVO     â”‚
â”‚ + useSttusServiceCall(vo): void             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ delegates to
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UserCrtfcProcessService (PUBC)            â”‚
â”‚   @Service                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + userCrtfcProcess(request): UserCrtfcVO    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UseSttusService (PUBC)                    â”‚
â”‚   @Service                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + insertUseSttus(vo): void                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       UserCrtfcVO (PUBC)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - serviceKey: String                        â”‚
â”‚ - serviceId: String                         â”‚
â”‚ - troblTyCode: String                       â”‚
â”‚ - troblCn: String                           â”‚
â”‚ - clientIp: String                          â”‚
â”‚ - requestTime: Date                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getTroblTyCode(): String                  â”‚
â”‚ + setTroblTyCode(code): void                â”‚
â”‚ + setTroblCn(content): void                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ (ì¡°íšŒ ì „ìš©)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       <<interface>>                         â”‚
â”‚     CultureFacilityService                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getFacilityList(...):                     â”‚
â”‚     List<CultureFacilityVO>                 â”‚
â”‚ + getFacility(facilityId):                  â”‚
â”‚     CultureFacilityVO                       â”‚
â”‚ + getTotalCount(...): int                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–³
              â”‚ implements
              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CultureFacilityServiceImpl                â”‚
â”‚     @Service("facilityService")             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - facilityMapper: CultureFacilityMapper     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getFacilityList(...):                     â”‚
â”‚     List<CultureFacilityVO>                 â”‚
â”‚   // í•„í„°ë§: ìœ í˜•, ì§€ì—­, ì´ë¦„ (ì¡°íšŒ ì „ìš©)   â”‚
â”‚ + getFacility(facilityId):                  â”‚
â”‚     CultureFacilityVO                       â”‚
â”‚   // Optional ì‚¬ìš© (Java 8)                 â”‚
â”‚ + getTotalCount(...): int                   â”‚
â”‚   // í˜ì´ì§•ìš© ì „ì²´ ê±´ìˆ˜                     â”‚
â”‚ - validateSearchParams(...): void           â”‚
â”‚   // ê²€ìƒ‰ íŒŒë¼ë¯¸í„° ìœ íš¨ì„± ê²€ì¦               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.5 ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ (ì¡°íšŒ ì „ìš© - MyBatis)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       <<interface>>                         â”‚
â”‚     CultureFacilityMapper                   â”‚
â”‚       @Mapper                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + selectFacilityList(params):               â”‚
â”‚     List<CultureFacilityVO>                 â”‚
â”‚   (ì¡°íšŒ ì „ìš© - facilityType, regionCode,    â”‚
â”‚    facilityName í•„í„°ë§)                     â”‚
â”‚ + selectFacility(facilityId):               â”‚
â”‚     CultureFacilityVO                       â”‚
â”‚   (ì¡°íšŒ ì „ìš© - ì‹œì„¤ IDë¡œ ì¡°íšŒ)              â”‚
â”‚ + selectTotalCount(params): int             â”‚
â”‚   (ì¡°íšŒ ì „ìš© - í˜ì´ì§•ìš© ì „ì²´ ê±´ìˆ˜)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ MyBatis Mapper XML
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CultureFacilityMapper.xml                  â”‚
â”‚       (MyBatis XML Mapper)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <select id="selectFacilityList">            â”‚
â”‚   SELECT * FROM TB_CULTURE_FACILITY...      â”‚
â”‚ </select>                                   â”‚
â”‚ <select id="selectFacility">                â”‚
â”‚   SELECT * FROM TB_CULTURE_FACILITY         â”‚
â”‚   WHERE FACILITY_ID = #{facilityId}         â”‚
â”‚ </select>                                   â”‚
â”‚ <select id="selectTotalCount">              â”‚
â”‚   SELECT COUNT(*) FROM TB_CULTURE_FACILITY  â”‚
â”‚ </select>                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ“Œ ì¡°íšŒ ì „ìš©**: INSERT/UPDATE/DELETE ì¿¼ë¦¬ëŠ” ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. MyBatis Mapper Interface íŒ¨í„´ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

### 2.6 Value Object (ë¬¸í™”ì‹œì„¤)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     CultureFacilityVO                       â”‚
â”‚       implements Serializable               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - facilityId: String                        â”‚
â”‚ - facilityName: String                      â”‚
â”‚ - facilityType: String                      â”‚
â”‚ - address: String                           â”‚
â”‚ - phone: String                             â”‚
â”‚ - latitude: BigDecimal                      â”‚
â”‚ - longitude: BigDecimal                     â”‚
â”‚ - openTime: String                          â”‚
â”‚ - homepage: String                          â”‚
â”‚ - regionCode: String                        â”‚
â”‚ - manageAgency: String                      â”‚
â”‚ - updateDate: Timestamp                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getFacilityId(): String                   â”‚
â”‚ + setFacilityId(id): void                   â”‚
â”‚ + getFacilityName(): String                 â”‚
â”‚ + setFacilityName(name): void               â”‚
â”‚ + getFacilityType(): String                 â”‚
â”‚ + setFacilityType(type): void               â”‚
â”‚ + getAddress(): String                      â”‚
â”‚ + setAddress(address): void                 â”‚
â”‚ + ... (ê¸°íƒ€ getter/setter)                  â”‚
â”‚ + toString(): String                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

### 3.1 REST API í˜¸ì¶œ íë¦„ (getCultureFacilityList) - ì¡°íšŒ ì „ìš©

```
Client     CultureFacilityRestController  CommonProc  PUBC  CultureFacilityService  CultureFacilityMapper  Database
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚ GET /api/cultureFacilities          â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚ ?serviceKey=xxx&facilityType=ë°•ë¬¼ê´€  â”‚          â”‚          â”‚            â”‚           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚ authServiceCall()â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚ userCrtfcProcess()  â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚ SELECT   â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚ Query DB  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Result   â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚ UserCrtfcVO         â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚ UserCrtfcVO      â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚ (troblTyCode=00) â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚ getFacilityList()â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚ selectFacilityList()   â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚ SELECT... â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Result   â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚ List<CultureFacilityVO>â”‚          â”‚
  â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚ createSuccessResponse()     â”‚          â”‚            â”‚           â”‚
  â”‚                     â”œâ”€ (JSON ë³€í™˜) â”€â”€â” â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                 â”‚ â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚ HTTP 200 OK        â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚ {JSON Response}    â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚ useSttusServiceCall()       â”‚          â”‚            â”‚           â”‚
  â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚ insertUseSttus()    â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚ INSERT   â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚           â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚            â”‚           â”‚
```

### 3.2 ì¸ì¦ ì‹¤íŒ¨ ì‹œ íë¦„

```
Client     CultureFacilityRestController  CommonProc    PUBC    UseSttusService    Database
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚ GET /api/cultureFacilities            â”‚          â”‚          â”‚                  â”‚
  â”‚ ?serviceKey=invalidâ”‚                  â”‚          â”‚          â”‚                  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚ authServiceCall()â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚ userCrtfcProcess()  â”‚                  â”‚
  â”‚                     â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚          â”‚ (ì„œë¹„ìŠ¤í‚¤ ê²€ì¦ ì‹¤íŒ¨)        â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚ UserCrtfcVO         â”‚                  â”‚
  â”‚                     â”‚                  â”‚ (troblTyCode=30)    â”‚                  â”‚
  â”‚                     â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚                  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚ insertUseSttus()    â”‚                  â”‚
  â”‚                     â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚ INSERT (ì¥ì•  ë¡œê·¸) â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚ UserCrtfcVO      â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚ (troblTyCode=30) â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚ createErrorResponse()       â”‚          â”‚                  â”‚
  â”‚                     â”œâ”€ (JSON ë³€í™˜) â”€â”€â” â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                 â”‚ â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚ HTTP 401 Unauthorized                  â”‚          â”‚          â”‚                  â”‚
  â”‚ {code:"030",       â”‚                  â”‚          â”‚          â”‚                  â”‚
  â”‚  msg:"ì„œë¹„ìŠ¤í‚¤ ë¯¸ë“±ë¡"}                â”‚          â”‚          â”‚                  â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚          â”‚          â”‚                  â”‚
  â”‚                     â”‚                  â”‚          â”‚          â”‚                  â”‚
```

### 3.3 SOAP ì›¹ ì„œë¹„ìŠ¤ í˜¸ì¶œ íë¦„ (ì¡°íšŒ ì „ìš©)

```
SOAPClient    CXFServlet  CultureFacilitySoapService  CommonProc  CultureFacilityService  Database
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚ SOAP Request     â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚ (getCultureFacilityList)        â”‚                â”‚             â”‚            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚ WSDL ë§¤í•‘    â”‚                â”‚             â”‚            â”‚
  â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚ authServiceCall()            â”‚            â”‚
  â”‚                  â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚ (PUBC ì¸ì¦)    â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚ UserCrtfcVO    â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚ getFacilityList() â”‚            â”‚            â”‚
  â”‚                  â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚ SELECT...  â”‚
  â”‚                  â”‚              â”‚                â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚ List<CultureFacilityVO>      â”‚            â”‚
  â”‚                  â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚ FacilityListResponse ìƒì„±     â”‚            â”‚
  â”‚                  â”‚              â”œâ”€ (XML ë³€í™˜) â”€â”€â”â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚ FacilityListResponse           â”‚             â”‚            â”‚
  â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
  â”‚ SOAP Response    â”‚              â”‚ useSttusServiceCall()         â”‚            â”‚
  â”‚ (SOAP Envelope)  â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚            â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚                â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚ (ë¡œê¹… ì™„ë£Œ)     â”‚             â”‚            â”‚
  â”‚                  â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚            â”‚
  â”‚                  â”‚              â”‚                â”‚             â”‚            â”‚
```

---

## 4. ê³„ì¸µë³„ ìƒì„¸ ì„¤ê³„

### 4.1 REST API Controller (ì¡°íšŒ ì „ìš©)

#### CultureFacilityRestController.java

```java
package iros.test.rest.controller;

import javax.ws.rs.*;
import javax.ws.rs.core.*;
import javax.servlet.http.HttpServletRequest;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import iros.test.common.CommonProc;
import iros.test.facility.service.CultureFacilityService;
import iros.test.facility.vo.CultureFacilityVO;
import iros.test.rest.dto.*;
import iros.pubc.usc.service.vo.UserCrtfcVO;
import iros.pubc.cmm.PubcErrorCodeProperties;

import java.util.*;

@Component
@Path("/api")
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
public class CultureFacilityRestController {

    @Autowired
    private CultureFacilityService facilityService;

    @Autowired
    private CommonProc commonProc;

    /**
     * ë¬¸í™”ì‹œì„¤ ëª©ë¡ ì¡°íšŒ (ì¡°íšŒ ì „ìš©)
     */
    @GET
    @Path("/cultureFacilities")
    public Response getCultureFacilityList(
        @QueryParam("serviceKey") String serviceKey,
        @QueryParam("facilityType") String facilityType,       // ë°•ë¬¼ê´€, ë¯¸ìˆ ê´€, ë„ì„œê´€
        @QueryParam("regionCode") String regionCode,           // 11(ì„œìš¸), 26(ë¶€ì‚°), etc.
        @QueryParam("facilityName") String facilityName,       // ì‹œì„¤ëª… ê²€ìƒ‰
        @QueryParam("pageNo") @DefaultValue("1") int pageNo,
        @QueryParam("numOfRows") @DefaultValue("10") int numOfRows,
        @Context HttpServletRequest request
    ) {
        UserCrtfcVO userCrtfcVO = null;

        try {
            // 1. PUBC ì¸ì¦
            userCrtfcVO = commonProc.authServiceCall(request);

            // 2. ì¸ì¦ ê²€ì¦
            if (!"00".equals(userCrtfcVO.getTroblTyCode())) {
                return createErrorResponse(userCrtfcVO, Response.Status.UNAUTHORIZED);
            }

            // 3. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ (ì¡°íšŒ ì „ìš©)
            List<CultureFacilityVO> facilities = facilityService.getFacilityList(
                facilityType, regionCode, facilityName, pageNo, numOfRows
            );

            int totalCount = facilityService.getTotalCount(facilityType, regionCode, facilityName);

            // 4. í˜ì´ì§• ì‘ë‹µ ìƒì„±
            PageResponse<CultureFacilityVO> pageResponse = new PageResponse<CultureFacilityVO>();
            pageResponse.setPageNo(pageNo);
            pageResponse.setNumOfRows(numOfRows);
            pageResponse.setTotalCount(totalCount);
            pageResponse.setItems(facilities);

            // 5. ì„±ê³µ ì‘ë‹µ
            return createSuccessResponse(pageResponse, Response.Status.OK);

        } catch (Exception e) {
            // 6. ì˜ˆì™¸ ì²˜ë¦¬
            if (userCrtfcVO != null) {
                userCrtfcVO.setTroblTyCode(PubcErrorCodeProperties.APPLICATION_ERROR);
                userCrtfcVO.setTroblCn(e.getMessage());
            }
            return createErrorResponse(userCrtfcVO, Response.Status.INTERNAL_SERVER_ERROR);

        } finally {
            // 7. ì‚¬ìš© í˜„í™© ë¡œê¹…
            if (userCrtfcVO != null) {
                commonProc.useSttusServiceCall(userCrtfcVO);
            }
        }
    }

    /**
     * ë¬¸í™”ì‹œì„¤ ìƒì„¸ ì¡°íšŒ (ì¡°íšŒ ì „ìš©)
     */
    @GET
    @Path("/cultureFacilities/{facilityId}")
    public Response getCultureFacility(
        @PathParam("facilityId") String facilityId,
        @QueryParam("serviceKey") String serviceKey,
        @Context HttpServletRequest request
    ) {
        // ë™ì¼í•œ PUBC ì¸ì¦ íŒ¨í„´ ì‚¬ìš©
        // facilityService.getFacility(facilityId) í˜¸ì¶œ
        // ... (ìƒì„¸ ì¡°íšŒ ë¡œì§)
    }

    // ğŸ“Œ ì¡°íšŒ ì „ìš© API: POST/PUT/DELETE ë©”ì„œë“œëŠ” ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

    /**
     * ì„±ê³µ ì‘ë‹µ ìƒì„±
     */
    private Response createSuccessResponse(Object data, Response.Status status) {
        ApiResponse<Object> apiResponse = ApiResponse.success(data);
        return Response.status(status)
            .entity(apiResponse)
            .build();
    }

    /**
     * ì—ëŸ¬ ì‘ë‹µ ìƒì„±
     */
    private Response createErrorResponse(UserCrtfcVO userCrtfcVO, Response.Status status) {
        String errorCode = userCrtfcVO != null ? userCrtfcVO.getTroblTyCode() : "99";
        String errorMsg = userCrtfcVO != null ? userCrtfcVO.getTroblCn() : "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";

        ApiResponse<Object> apiResponse = ApiResponse.error(errorCode, errorMsg);
        return Response.status(status)
            .entity(apiResponse)
            .build();
    }
}
```

---

### 4.2 SOAP Service (ì¡°íšŒ ì „ìš©)

#### CultureFacilitySoapService.java

```java
package iros.test.soap.service;

import javax.jws.*;
import javax.servlet.http.HttpServletRequest;
import javax.xml.ws.WebServiceContext;
import javax.xml.ws.handler.MessageContext;
import javax.annotation.Resource;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import iros.test.common.CommonProc;
import iros.test.facility.service.CultureFacilityService;
import iros.test.facility.vo.CultureFacilityVO;
import iros.test.soap.dto.*;
import iros.pubc.usc.service.vo.UserCrtfcVO;

import java.util.*;

@Service("cultureFacilitySoapService")
@WebService(
    serviceName = "CultureFacilityService",
    portName = "CultureFacilityServicePort",
    targetNamespace = "http://service.soap.test.pubc.iros/"
)
public class CultureFacilitySoapService {

    @Autowired
    private CultureFacilityService facilityService;

    @Autowired
    private CommonProc commonProc;

    @Resource
    private WebServiceContext wsContext;

    /**
     * ë¬¸í™”ì‹œì„¤ ëª©ë¡ ì¡°íšŒ (ì¡°íšŒ ì „ìš©)
     */
    @WebMethod
    @WebResult(name = "facilityListResponse")
    public FacilityListResponse getCultureFacilityList(
        @WebParam(name = "serviceKey") String serviceKey,
        @WebParam(name = "facilityType") String facilityType,
        @WebParam(name = "regionCode") String regionCode,
        @WebParam(name = "facilityName") String facilityName,
        @WebParam(name = "pageNo") Integer pageNo,
        @WebParam(name = "numOfRows") Integer numOfRows
    ) throws SoapServiceException {

        UserCrtfcVO userCrtfcVO = null;

        try {
            // 1. HttpServletRequest íšë“
            HttpServletRequest request = getHttpServletRequest();

            // 2. PUBC ì¸ì¦
            userCrtfcVO = commonProc.authServiceCall(request);

            // 3. ì¸ì¦ ê²€ì¦
            if (!"00".equals(userCrtfcVO.getTroblTyCode())) {
                throw new SoapServiceException(
                    userCrtfcVO.getTroblTyCode(),
                    userCrtfcVO.getTroblCn()
                );
            }

            // 4. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ (ì¡°íšŒ ì „ìš©)
            int page = (pageNo != null) ? pageNo : 1;
            int rows = (numOfRows != null) ? numOfRows : 10;

            List<CultureFacilityVO> facilities = facilityService.getFacilityList(
                facilityType, regionCode, facilityName, page, rows
            );

            int totalCount = facilityService.getTotalCount(facilityType, regionCode, facilityName);

            // 5. ì‘ë‹µ ìƒì„±
            FacilityListResponse response = new FacilityListResponse();
            response.setCode("000");
            response.setMsg("OK");
            response.setTotalCount(totalCount);
            response.setPageNo(page);
            response.setNumOfRows(rows);
            response.setFacilities(facilities);

            return response;

        } catch (SoapServiceException e) {
            // SOAP Faultë¡œ ë³€í™˜
            if (userCrtfcVO != null) {
                userCrtfcVO.setTroblTyCode(e.getErrorCode());
                userCrtfcVO.setTroblCn(e.getMessage());
            }
            throw e;

        } catch (Exception e) {
            if (userCrtfcVO != null) {
                userCrtfcVO.setTroblTyCode("99");
                userCrtfcVO.setTroblCn(e.getMessage());
            }
            throw new SoapServiceException("99", e.getMessage());

        } finally {
            // 6. ì‚¬ìš© í˜„í™© ë¡œê¹…
            if (userCrtfcVO != null) {
                commonProc.useSttusServiceCall(userCrtfcVO);
            }
        }
    }

    /**
     * ë¬¸í™”ì‹œì„¤ ìƒì„¸ ì¡°íšŒ (ì¡°íšŒ ì „ìš©)
     */
    @WebMethod
    @WebResult(name = "facilityResponse")
    public FacilityResponse getCultureFacility(
        @WebParam(name = "serviceKey") String serviceKey,
        @WebParam(name = "facilityId") String facilityId
    ) throws SoapServiceException {
        // ë™ì¼í•œ PUBC ì¸ì¦ íŒ¨í„´
        // facilityService.getFacility(facilityId) í˜¸ì¶œ
        // ... (ìƒì„¸ ì¡°íšŒ ë¡œì§)
    }

    // ğŸ“Œ ì¡°íšŒ ì „ìš© SOAP ì„œë¹„ìŠ¤: createFacility, updateFacility, deleteFacility ë©”ì„œë“œëŠ” ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

    /**
     * HttpServletRequest íšë“
     */
    private HttpServletRequest getHttpServletRequest() {
        MessageContext mc = wsContext.getMessageContext();
        return (HttpServletRequest) mc.get(MessageContext.SERVLET_REQUEST);
    }
}
```

---

## 5. ì„¤ì • íŒŒì¼ êµ¬ì¡°

### 5.1 web.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                             http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5">

    <display-name>PUBC Test API</display-name>

    <!-- Spring Context Loader -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/config/spring/context-*.xml,
            classpath:iros/pubc/spring/context-common-pubc.xml,
            classpath:iros/pubc/spring/context-datasource-pubc.xml,
            classpath:iros/pubc/spring/context-sqlMap-pubc.xml,
            classpath:iros/pubc/spring/context-idgen-pubc.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Apache CXF Servlet -->
    <servlet>
        <servlet-name>CXFServlet</servlet-name>
        <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>CXFServlet</servlet-name>
        <url-pattern>/services/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>CXFServlet</servlet-name>
        <url-pattern>/api/*</url-pattern>
    </servlet-mapping>

    <!-- Character Encoding Filter -->
    <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Welcome File -->
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

</web-app>
```

### 5.2 context-cxf.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jaxws="http://cxf.apache.org/jaxws"
       xmlns:jaxrs="http://cxf.apache.org/jaxrs"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
           http://cxf.apache.org/jaxws
           http://cxf.apache.org/schemas/jaxws.xsd
           http://cxf.apache.org/jaxrs
           http://cxf.apache.org/schemas/jaxrs.xsd">

    <import resource="classpath:META-INF/cxf/cxf.xml"/>
    <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml"/>
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>

    <!-- JAX-WS SOAP Service -->
    <jaxws:endpoint id="cultureFacilitySoapService"
                    implementor="#cultureFacilitySoapServiceBean"
                    address="/CultureFacilityService"/>

    <!-- JAX-RS REST Service -->
    <jaxrs:server id="restServices" address="/api">
        <jaxrs:serviceBeans>
            <ref bean="cultureFacilityRestController"/>
        </jaxrs:serviceBeans>
        <jaxrs:providers>
            <bean class="org.apache.cxf.jaxrs.provider.json.JSONProvider">
                <property name="serializeAsArray" value="true"/>
            </bean>
        </jaxrs:providers>
    </jaxrs:server>

    <!-- Spring Bean ì°¸ì¡° -->
    <bean id="cultureFacilitySoapServiceBean" class="iros.test.soap.service.CultureFacilitySoapService"/>
    <bean id="cultureFacilityRestController" class="iros.test.rest.controller.CultureFacilityRestController"/>

</beans>
```

---

**ì‘ì„±ì**: Claude
**ë²„ì „**: 1.0
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-11-03
